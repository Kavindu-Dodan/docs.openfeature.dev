---
sidebar_position: 1
id: validator
---

# Validator

## Objective

<i>Integrate a hook that validates that the result of a flag evaluation is a hex color.</i>

The `hook` accepts the following `validator` interface

```go
type validator interface {
	IsValid(flagEvaluationDetails of.EvaluationDetails) error
}

// Hook validates the flag evaluation details After flag resolution
type Hook struct {
	Validator validator
}
```

This tutorial uses the existing [hex validator](https://github.com/open-feature/golang-sdk-contrib/hooks/validator/pkg/hex/hex.go)
but <i>anything</i> that conforms to the `validator` interface can be substituted.

## Steps

Import the [OpenFeature SDK](https://github.com/open-feature/golang-sdk) and the [validator hook](https://github.com/open-feature/golang-sdk-contrib/hooks/validator).
```go
package main

import (
    "github.com/open-feature/golang-sdk-contrib/hooks/validator/pkg/hex"
    "github.com/open-feature/golang-sdk-contrib/hooks/validator/pkg/validator"
    "github.com/open-feature/golang-sdk/pkg/openfeature"
)
```

Create an instance of the `validator hook` struct using the hex validator:

```go
func main() {
	v := validator.Hook{Validator: hex.Validator{}}
}
```

Register the `NoopProvider`, this simply returns the given default value on flag evaluation:

```go
openfeature.SetProvider(openfeature.NoopProvider{})
```

Create the client, call the flag evaluation using the `validator hook` at the point of invocation:

```go
client := openfeature.NewClient("foo")
evalOptions := openfeature.NewEvaluationOptions([]openfeature.Hook{v}, openfeature.HookHints{})

_, err := client.
    StringValueDetails("blue", "invalidhex", openfeature.EvaluationContext{}, evalOptions)
if err != nil {
    fmt.Println("err:", err)
}
```

Check that the flag evaluation returns an error as `invalidhex` is not a valid hex color

```shell
go run main.go
err: execute after hook: invalid format
```

